1ï¸âƒ£ ESP32 â†’ Flaskï¼šå›å ±ç‹€æ…‹

ESP32 é€å‡ºï¼š

POST /update

âœ” Body JSONï¼š
{
  "robot_id": 1,
  "x": 10,
  "y": 5,
  "status": "moving",
  "battery": 88
}

2ï¸âƒ£ Flask â†’ ESP32

ESP32 

GET /task/1

âœ” Flask å›æ‡‰ JSONï¼š

æœ‰ä»»å‹™ï¼š

{
  "task_id": 12,
  "target_x": 30,
  "target_y": 7
}


ç„¡ä»»å‹™ï¼š

{
  "task_id": -1
}

3ï¸âƒ£ ESP32 â†’ Flask
POST /done


JSON

{
  "robot_id": 1,
  "task_id": 12
}

4ï¸âƒ£ ESP32 â†’ Flask
POST /alert


JSON

{
  "robot_id": 2,
  "alert": "obstacle"
}

5ï¸âƒ£ Flask â†’ ESP32



{
  "action": "wait",
  "wait_time": 1.5
}


{
  "action": "reroute",
  "new_path": [[10,5],[10,6],[11,6]]
}

-------------------------------------------------------------------------------------

ğŸ¯ ä¸‰ã€MySQL è³‡æ–™è¡¨æ ¼å¼
ğŸ“Œ robotsï¼ˆè»Šå­ç‹€æ…‹ï¼‰
æ¬„ä½	å‹æ…‹		èªªæ˜
id	INT		è»Š ID
x	INT		ç›®å‰ä½ç½® X
y	INT		ç›®å‰ä½ç½® Y
status	VARCHAR		moving / idle / charging
battery	INT		é›»é‡
ğŸ“Œ tasksï¼ˆä»»å‹™è¡¨ï¼‰
æ¬„ä½		å‹æ…‹		èªªæ˜
id		INT		ä»»å‹™ ID
target_x	INT		ä»»å‹™åæ¨™
target_y	INT		ä»»å‹™åæ¨™
assigned	INT		æŒ‡æ´¾çµ¦å“ªå°è»Šï¼ˆ0 è¡¨æœªæŒ‡æ´¾ï¼‰
done		TINYINT		æ˜¯å¦å®Œæˆ